<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"
        integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <title>JavaScript - Homework 6</title>
</head>

<body class="part-2">
    <h1>CNIT 133 Homework 6 (Part 2) - Count Character</h1>
    <ul class="nav">
        <li>
            <a href="./hw6.html">Homework 6 Main Page</a>
        </li>
        <li><a href="./hw6-part1.html">Part 1 - Math</a></li>
        <li><a href="./hw6-part3.html">Part 3 - Phone Number Format </a></li>
    </ul>
    <form>
        <label for="long_content">Type a long content:</label>
        <textarea id="long_content" rows="10"></textarea>
        <label for="one_character">Type only one letter:</label>
        <input type="text" id="one_character" maxlength="1">
        <div>
            <button type="submit">Submit</button>
            <button type="reset" id="clearBtn">Clear</button>
        </div>
    </form>
    <div id="message"></div>
    <script>
        $(document).ready(function () {
            $("form").on('submit', function (e) {
                e.preventDefault();
                const long = $("#long_content").val();
                const char = $("#one_character").val();
                const count = search(long, char);
                if (count > 0) {
                    $("#message").html(`<p>${count} times the character ${char} shows up in the content </p>`)
                } else {
                    $("form").trigger("reset")
                    $("#message").html(`<p>Search character ${char} not found in the content you typed</p>`)
                    window.open("hw6-newWindow.html", "new", "width=300,height=100,left=600,top=300");
                }

            })
            function search(str, char) {
                let count = 0;
                for (const s of str) {
                    if (s.toLowerCase() === char.toLowerCase()) {
                        count += 1
                    }
                }
                return count;
            }
            $("#clearBtn").on("click", function () {
                $("form").trigger("reset")
                $("#message").html("")
            })
        })
    </script>
</body>

</html>